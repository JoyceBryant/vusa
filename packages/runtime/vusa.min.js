(function(e,t){"object"===typeof exports&&"undefined"!==typeof module?t(exports,require("san")):"function"===typeof define&&define.amd?define(["exports","san"],t):(e="undefined"!==typeof globalThis?globalThis:e||self,t(e.Vusa={},e.san))})(this,(function(e,t){"use strict";function n(e){if(e&&e.__esModule)return e;var t=Object.create(null);return e&&Object.keys(e).forEach((function(n){if("default"!==n){var r=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(t,n,r.get?r:{enumerable:!0,get:function(){return e[n]}})}})),t["default"]=e,Object.freeze(t)}var r=n(t),a=t.Data.prototype.get;t.Data.prototype.get=function(e,n){if(!e)return this.raw;var r=e;"string"===typeof e?e=t.parseExpr(e):r=e.paths.map((function(e){return e.value})).join("."),this._dep&&this._dep.depend({key:r,expr:e});var o=a.call(this,e,n);if(!e||void 0!==o||!this.owner||e.type!==t.ExprType.ACCESSOR)return o;var i=e.paths,s=i[0].value;if(this.owner._propKeys.concat(this.owner._dataKeys,this.owner._computedKeys).indexOf(s)>=0)return o;o=this.owner[s];for(var c=1,u=i.length;null!=o&&c<u;c++)o=o[i[c].value||t.evalExpr(i[c],n)];return o};var o=Object.assign;function i(e){for(var t={},n=0;n<e.length;n++)e[n]&&o(t,e[n]);return t}function s(e,t){if(e.length){var n=e.indexOf(t);if(n>-1)return e.splice(n,1)}}var c=Object.prototype.toString;function u(e){return null!==e&&"object"===typeof e}var l=Object.prototype.hasOwnProperty;function f(e,t){return l.call(e,t)}function p(e){return"[object Object]"===c.call(e)}function d(e,t,n){Object.defineProperty(e,t,o({enumerable:!1,configurable:!0},n))}function v(e){var t=Object.create(null);return function(n){var r=t[n];return r||(t[n]=e(n))}}var h=/([^-])([A-Z])/g,y=v((function(e){return e.replace(h,"$1-$2").replace(h,"$1-$2").toLowerCase()})),m=function(e){return e.replace(/-(\w)/g,(function(e,t){return t?t.toUpperCase():""}))};function b(e){var t=!1;return function(){var n=[],r=arguments.length;while(r--)n[r]=arguments[r];t||(t=!0,e.apply(this,n))}}var _="function"===typeof Object.freeze;function g(e){return _&&u(e)?Object.freeze(e):e}function C(e){return{type:t.ExprType.ACCESSOR,paths:[{type:1,value:e}]}}function w(e){return void 0===e&&(e=""),e?e.split(" ").reduce((function(e,t){var n;return t?Object.assign({},e,(n={},n[t]=1,n)):e}),{}):""}function O(e){return void 0===e&&(e={}),Object.keys(e).reduce((function(t,n){return e[n]?Object.assign({},t,w(n)):t}),{})}function x(e){void 0===e&&(e=[]);for(var t={},n=0,r=e.length;n<r;n++){var a=e[n];a&&(t=Object.assign({},t,"string"===typeof a?w(a):Array.isArray(a)?x(a):O(a)))}return t}function j(e,t){return void 0===e&&(e=""),void 0===t&&(t={}),Object.keys(x([e,t])).join(" ")}var A=v((function(e){var t={},n=/;(?![^(]*\))/g,r=/:(.+)/;return e.split(n).forEach((function(e){if(e){var n=e.split(r);n.length>1&&(t[n[0].trim()]=n[1].trim())}})),t}));function k(e){var t={};for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[y(n)]=e[n]);return t}function E(e){return Array.isArray(e)?k(i(e)):"string"===typeof e?A(e):k(e)}function T(e,t,n){return void 0===n&&(n=!0),t=E(t),n||(t.display="none"),e?o(e,t):t}var $=v((function(e){for(var t=new Array(e),n=0;n<e;n++)t[n]=n+1;return t}));function N(e){if(!isNaN(e)){var t=+e;e=$(t)}return e}function S(e,n){if("component"!==e.tagName||null==e.hotspot.props.is)return this.components[e.tagName];var r=e.props[e.hotspot.props.is],a=t.evalExpr(r.expr,n);return this.components[a]}function D(e){return e.reduce((function(e,t){var n=t.k,r=t.v;return e[n]=r,e}),{})}function P(e){var t=this;function n(e){for(var t=0,n=e.length;t<n;t++){var r=a(e[t]);if(r)return r}}function a(o){var i=o.nodeType;if(1!==i){var s;if(o.owner===t){var c,u;switch(i){case 4:case 3:if(c=o.aNode.directives.ref,u=c&&r.evalExpr(c.value,o.scope,t),c&&(u===e||m(u)===e))return 4===i?o.el:o.children.map(a);break;case 5:if(c=o.source.directives.ref,u=c&&r.evalExpr(c.value,o.scope,t),c&&(u===e||m(u)===e))return o}s=o.slotChildren&&n(o.slotChildren)}return s||n(o.children)}}return n(this.children)}var K={beforeCreate:"compiled",mounted:"attached",created:"inited",beforeMount:"created",beforeDestroy:"detached",destroy:"disposed",updated:"updated",beforeUpdate:"beforeUpdate",activated:"activated",deactivated:"deactivated"},L=Object.keys(K),M=["floor","ceil","round","abs","max","min","pow"],R={};M.forEach((function(e){R["math_"+e]=function(){var t=[],n=arguments.length;while(n--)t[n]=arguments[n];return Math[e].apply(Math,t)}})),R.array_slice=function(e,t,n){var r=null==n?void 0:n>=0?t+n:e.length+n;return e.slice(t,r)},R.array_join=function(e,t){return e.join(t)},R.str_pos=function(e,t){return e.indexOf(t)},R.object_freeze=function(e){return Object.freeze(e)};var U={json:function(e){return JSON.stringify(e)},lower:function(e){return e.toLowerCase()},upper:function(e){return e.toUpperCase()},_cat:function(e,t){return(e||"").toString()+(t||"")}},z=Object.freeze({__proto__:null,methods:R,filters:U}),q=["filters"];function F(e,t){return t?e?e.concat(t):Array.isArray(t)?t:[t]:e}function W(e){for(var t={},n=Array.isArray(e.mixins)?[z].concat(e.mixins,[e]):[z,e],r={},a=0,i=n.length;a<i;a++){var s=n[a];s.methods&&o(r,s.methods);for(var c=0;c<q.length;c++){var u=q[c];s[u]&&(t[u]=o(t[u]||{},s[u]))}for(var l=0;l<L.length;l++){var f=L[l],p=K[f];s[f]&&(t[p]=F(t[p]||[],s[f]))}}for(var d=0;d<L.length;d++){var v=L[d],h=K[v];if(t[h]){var y=t[h].slice();t[h]=1===y.length?y[0]:function(){var e=this;y.forEach((function(t){return t.call(e)}),this)}}}return t._methodKeys=Object.keys(r),o(t,r),e.messages&&(t.messages=e.messages),t}function B(){}function G(){B.target=[]}function I(){B.target=null}function J(e,t){"object"===typeof e&&(e=e.paths.map((function(e){return e.value})).join("."));var n=this.computedDeps[e];n||(n=this.computedDeps[e]={}),G();var r=t[e].call(this),a=B.target;I();for(var o=this,i=0;i<a.length;i++){var s=a[i],c=s.expr,u=s.key;n[u]||(n[u]=1,this.watch(c,(function(){J.call(o,e,t)})))}this.data.set(e,r)}B.prototype.depend=function(e){B.target&&B.target.push(e)},B.target=null;var V=Array.prototype,Z=Object.create(V),H=["push","pop","shift","unshift","splice","sort","reverse"];H.forEach((function(e){var t=V[e];d(Z,e,{value:function(){var n=[],r=arguments.length;while(r--)n[r]=arguments[r];var a,o=t.apply(this,n),i=this.__ob__;switch(e){case"push":case"unshift":a=n;break;case"splice":a=n.slice(2);break}return a&&i.observeArray(a),i.context.data.set(i.expr,this,{force:!0}),ee(i.context.data.get(i.expr),i.expr,i.context),o}})}));var Q=function(e,t,n){this.expr=t,this.context=n,d(e,"__ob__",{value:this}),this.value=e,Array.isArray(e)?(e.__proto__=Z,this.observeArray(e)):(this.keys=Object.keys(e)||[],this.walk(e))};function X(e,n,r,a){var o=Object.getOwnPropertyDescriptor(e,n);if(!o||!1!==o.configurable){var i=o&&o.get,s=o&&o.set,c={type:t.ExprType.ACCESSOR,paths:r.paths.concat([{type:t.ExprType.STRING,value:n}])},u=new B,l=e[n];ee(l,c,a);var f={enumerable:!0,configurable:!0,set:function(t){var n=i?i.call(e):l;t!==n&&(i&&!s||(s?s.call(e,t):l=t,ee(t,c,a),a.data.set(c,t,{force:!0})))},get:function(){u.depend({context:a,expr:c});var t=i?i.call(e):l;return t}};d(e,n,f)}}Q.prototype.walk=function(e){for(var t=this.keys,n=0;n<t.length;n++)X(e,t[n],this.expr,this.context)},Q.prototype.observeArray=function(e){for(var n=0,r=e.length;n<r;n++)ee(e[n],o({},this.expr,{paths:this.expr.paths.concat([{type:t.ExprType.NUMBER,value:n}])}),this.context)};var Y={type:t.ExprType.ACCESSOR,paths:[]};function ee(e,t,n){var r;if(u(e))return f(e,"__ob__")&&e.__ob__ instanceof Q?r=e.__ob__:(Array.isArray(e)||p(e))&&Object.isExtensible(e)&&(r=new Q(e,t,n)),r}function te(e){var t=this,n=o({},Y),r=this._dataKeys.concat(this._propKeys),a=r.length;this._data=this.data.get(),ee(this._data,n,this);for(var i=this,s=function(e){var t=r[e];d(i,t,{get:function(){return i._data[t]},set:function(e){i._data[t]=e}})},c=0;c<a;c++)s(c);var u=this.data.owner=this;this.computedDeps={};for(var l=function(n){var r=t._computedKeys[n];J.call(t,r,e),d(t,r,{get:function(){return u.data.get(C(r))}})},f=0;f<t._computedKeys.length;f++)l(f)}function ne(){var e=this,t=e.slotChildren,n=e.lifeCycle,r=e.sourceSlots;if(n.attached)return t.reduce((function(e,t){var n=t.name||"default";return e[n]||(e[n]=[]),e[n]=e[n].concat(t.children),e}),{});var a={};return r.named&&o(a,r.named),r.noname&&(a.default=r.noname),a}function re(e){return function n(r){var a=this;a.nodeType===t.NodeType.CMPT&&a._toPhase(e),a.children&&a.children.length>1&&a.children.forEach(n)}}var ae=re("activited"),oe=re("deactivited"),ie=/\s+/;function se(e,t){if(t&&(t=t.trim()))if(e.classList)t.indexOf(" ")>-1?t.split(ie).forEach((function(t){return e.classList.add(t)})):e.classList.add(t);else{var n=" "+(e.getAttribute("class")||"")+" ";n.indexOf(" "+t+" ")<0&&e.setAttribute("class",(n+t).trim())}}function ce(e,t){if(t&&(t=t.trim()))if(e.classList)t.indexOf(" ")>-1?t.split(ie).forEach((function(t){return e.classList.remove(t)})):e.classList.remove(t),e.classList.length||e.removeAttribute("class");else{var n=" "+(e.getAttribute("class")||"")+" ",r=" "+t+" ";while(n.indexOf(r)>=0)n=n.replace(r," ");n=n.trim(),n?e.setAttribute("class",n):e.removeAttribute("class")}}var ue=v((function(e){return{enterClass:e+"-enter",enterToClass:e+"-enter-to",enterActiveClass:e+"-enter-active",leaveClass:e+"-leave",leaveToClass:e+"-leave-to",leaveActiveClass:e+"-leave-active"}}));function le(e){if(e){if("object"===typeof e){var t={};return!1!==e.css&&o(t,ue(e.name||"v")),o(t,e),t}return"string"===typeof e?ue(e):void 0}}var fe="undefined"!==typeof window,pe="transition",de="animation",ve="transition",he="transitionend",ye="animation",me="animationend";fe&&(void 0===window.ontransitionend&&void 0!==window.onwebkittransitionend&&(ve="WebkitTransition",he="webkitTransitionEnd"),void 0===window.onanimationend&&void 0!==window.onwebkitanimationend&&(ye="WebkitAnimation",me="webkitAnimationEnd"));var be=fe?window.requestAnimationFrame?window.requestAnimationFrame.bind(window):setTimeout:function(e){return e()};function _e(e){be((function(){be(e)}))}var ge=/\b(transform|all)(,|$)/;function Ce(e,t){var n,r=window.getComputedStyle(e),a=(r[ve+"Delay"]||"").split(", "),o=(r[ve+"Duration"]||"").split(", "),i=we(a,o),s=(r[ye+"Delay"]||"").split(", "),c=(r[ye+"Duration"]||"").split(", "),u=we(s,c),l=0,f=0;t===pe?i>0&&(n=pe,l=i,f=o.length):t===de?u>0&&(n=de,l=u,f=c.length):(l=Math.max(i,u),n=l>0?i>u?pe:de:null,f=n?n===pe?o.length:c.length:0);var p=n===pe&&ge.test(r[ve+"Property"]);return{type:n,timeout:l,propCount:f,hasTransform:p}}function we(e,t){while(e.length<t.length)e=e.concat(e);return Math.max.apply(null,t.map((function(t,n){return Oe(t)+Oe(e[n])})))}function Oe(e){return 1e3*Number(e.slice(0,-1).replace(",","."))}function xe(e,t){var n=e._transitionClasses||(e._transitionClasses=[]);n.indexOf(t)<0&&(n.push(t),se(e,t))}function je(e,t){e._transitionClasses&&s(e._transitionClasses,t),ce(e,t)}function Ae(e){return"number"===typeof e&&!isNaN(e)}function ke(e,t,n){var r=Ce(e,t),a=r.type,o=r.timeout,i=r.propCount;if(!a)return n();var s=a===pe?he:me,c=0,u=function(t){t.target===e&&++c>=i&&l()},l=function(){e.removeEventListener(s,u),n()};setTimeout((function(){c<i&&l()}),o+1),e.addEventListener(s,u)}function Ee(e){var t=le(e),n=t.css,r=t.type,a=t.enterClass,o=t.enterToClass,i=t.enterActiveClass,s=t.appearClass,c=t.appearToClass,l=t.appearActiveClass,f=t.beforeEnter,p=t.enter,d=t.afterEnter,v=t.enterCancelled,h=t.beforeAppear,y=t.appear,m=t.afterAppear,_=t.appearCancelled,g=t.leaveClass,C=t.leaveToClass,w=t.leaveActiveClass,O=t.beforeLeave,x=t.leave,j=t.afterLeave,A=t.leaveCancelled,k=t.delayLeave,E=t.duration,T=this,$=!1!==n;return{enter:S,leave:D};function N(e){if(!e)return!1;if("function"===typeof e)return e;var t=T.owner[e];return!(!t||"function"!==typeof t)&&t}function S(e,t){var n=!T.lifeCycle.attached;if(e._leaveCb&&(e._leaveCb.cancelled=!0,e._leaveCb()),!e._enterCb&&1===e.nodeType&&(!n||y)){var g=n&&s?s:a,C=n&&l?l:i,w=n&&c?c:o,O=n&&N(h)||N(f),x=n&&N(y)||N(p),j=n&&N(m)||N(d),A=n&&N(_)||N(v),k=+(u(E)?E.enter:E),S=x&&x.length>1,D=e._enterCb=b((function(){$&&(je(e,w),je(e,C)),D.cancelled?($&&je(e,g),A&&A(e)):j&&j(e),e._enterCb=null}));x&&x(e,D),O&&O(e),$&&(xe(e,g),xe(e,C),_e((function(){je(e,g),D.cancelled||(xe(e,w),S||(Ae(k)?setTimeout(D,k):ke(e,r,D)))}))),$||S||D(),t()}}function D(e,t){if(e._enterCb&&(e._enterCb.cancelled=!0,e._enterCb()),!e._leaveCb){var n=N(x),a=N(k),o=N(O),i=N(j),s=+(u(E)?E.leave:E),c=n&&n.length>1,l=e._leaveCb=b((function(){$&&(je(e,C),je(e,w)),l.cancelled?($&&je(e,g),A&&A(e)):(t(),i&&i(e)),e._leaveCb=null}));a?a(f):f()}function f(){l.cancelled||(o&&o(e),$&&(xe(e,g),xe(e,w),_e((function(){je(e,g),l.cancelled||(xe(e,C),c||(Ae(s)?setTimeout(l,s):ke(e,r,l)))}))),n&&n(e,l),$||c||l())}}}var Te=function(){},$e={$activate:ae,$deactivate:oe,_mc:j,_ms:T,_l:N,_ex:o,_ocp:D,_noop:Te,_t:Ee,getComponentType:S,$emit:t.Component.prototype.fire,$on:t.Component.prototype.on,$watch:t.Component.prototype.watch,$nextTick:t.nextTick},Ne={$el:function(){return this.el},$context:function(){return this.owner},$parent:function(){return this.parentComponent},$children:function(){return this.children.filter((function(e){return 5===e.nodeType}))},$root:function(){var e=this;if(this.parentComponent)while(e.parentComponent)e=e.parentComponent;return e},$slots:ne,_isDestroyed:function(){return!!this.lifeCycle.disposed}},Se=t.Component.prototype._update;t.Component.prototype._update=function(e){e&&this._toPhase("beforeUpdate"),Se.call(this,e)};var De="_SanCtor",Pe=C("$style");function Ke(e){if(e[De])return e[De];var n={};if(e.components&&(n.components=Object.keys(e.components).reduce((function(n,r){var a=e.components[r];return n[r]=n[y(r)]=a instanceof t.Component?a:a.template||a.aNode?t.defineComponent(a):Ke(a),n}),{}),n._cmptReady=1),e.template||e.aNode||e instanceof t.Component)return t.defineComponent(o({},e,n));var r=e.__sanOptimizeSSR||!1,a=o(n,{template:e.__santemplate,aNode:e.__sanaNode,aPack:e.__sanaPack,_isSan:!0},$e,W(e)),i=a.compiled;a.compiled=function(){this._calcComputed=Te,i&&i.call(this);var t=Object.keys(Ne).reduce((function(e,t){return e[t]={get:function(){return Ne[t].call(this)}},e}),{});t.$options={value:e},Object.defineProperties(this,t)};var s=e.__sanRefs,c=a.inited;a.inited=function(){var t=this,n=this;if(!r&&(this.$refs=Object.create(null),s)){for(var a=function(e,t){var r=s[e];d(n.$refs,r.name,{get:function(){return r.root?n.el:n.ref(r.name)}})},o=0,i=s.length;o<i;o++)a(o,i);n.ref=P}if(this.$style&&this.data.set(Pe,g(this.$style)),r){if(e.computed&&r)for(var u in e.computed)if(Object.hasOwnProperty.call(e.computed,u)){var l=e.computed[u];this.data.data[u]=l.call(this.data.data)}}else te.call(this,e.computed);c&&c.call(this),e.watch&&!r&&Object.keys(e.watch).forEach((function(n){t.watch(n,e.watch[n].bind(t))})),e.preprocessANode&&e.preprocessANode.call(this)};var u=a.beforeUpdate;a.beforeUpdate=function(){u&&u.call(this),e.preprocessANode&&e.preprocessANode.call(this)},a.initData=function(){var t=this,n={};if(e.props){var a=e.props?Array.isArray(e.props)?e.props:Object.keys(e.props):[];r||(t._propKeys=e._propKeys=a);var i=a.length;if(i>0&&!Array.isArray(e.props))for(var s=0,c=a.length;s<c;s++){var u=a[s],l=e.props[u];l.default&&(n[u]="function"===typeof l.default?l.default():l.default)}}else t._propKeys=[];var f="function"===typeof e.data?e.data.call(o({},n,this._srcSbindData)):e.data||{};r||(this._dataKeys=Object.keys(f)||[]);var p=o({$style:{}},n,f);return!r&&e.computed?t._computedKeys=Object.keys(e.computed):r||(t._computedKeys=[]),p};var l=t.defineComponent(a);return e[De]=l}e.defineComponent=Ke,Object.defineProperty(e,"__esModule",{value:!0})}));
