{"version":3,"sources":["../../src/runtime/define-component.js"],"names":["lifeCycleMap","beforeCreate","mounted","created","beforeMount","beforeDestroy","destroy","updated","define","options","sanOptions","_mc","mergeClass","_ms","mergeStyle","_l","loopExpression","template","__santemplate","forEach","key","methods","Object","keys","hook","data","initData","components","reduce","prev","console","log","Component"],"mappings":";;;;;;;AAKA;;AACA;;AACA;;AACA;;AACA;;;;AATA;;;;AAWA,MAAMA,YAAY,GAAG;AACjBC,EAAAA,YAAY,EAAE,QADG;AAEjBC,EAAAA,OAAO,EAAE,UAFQ;AAGjBC,EAAAA,OAAO,EAAE,SAHQ;AAIjBC,EAAAA,WAAW,EAAE,SAJI;AAKjBC,EAAAA,aAAa,EAAE,UALE;AAMjBC,EAAAA,OAAO,EAAE,UANQ;AAOjBC,EAAAA,OAAO,EAAE;AAPQ,CAArB;;AAUe,SAASC,MAAT,CAAiBC,OAAjB,EAA0B;AAErC,QAAMC,UAAU,GAAG;AACfC,IAAAA,GAAG,EAAEC,mBADU;AAEfC,IAAAA,GAAG,EAAEC,mBAFU;AAGfC,IAAAA,EAAE,EAAEC,uBAHW;AAIfC,IAAAA,QAAQ,EAAER,OAAO,CAACS;AAJH,GAAnB;AAOA,GAAC,SAAD,EAAY,UAAZ,EAAwB,OAAxB,EAAiCC,OAAjC,CAAyCC,GAAG,IAAI;AAC5C,QAAIX,OAAO,CAACW,GAAD,CAAX,EAAkB;AACdV,MAAAA,UAAU,CAACU,GAAD,CAAV,GAAkBX,OAAO,CAACW,GAAD,CAAzB;AACH;AACJ,GAJD;;AAMA,MAAIX,OAAO,CAACY,OAAZ,EAAqB;AACjBC,IAAAA,MAAM,CAACC,IAAP,CAAYd,OAAO,CAACY,OAApB,EAA6BF,OAA7B,CAAqCC,GAAG,IAAI;AACxCV,MAAAA,UAAU,CAACU,GAAD,CAAV,GAAkBX,OAAO,CAACY,OAAR,CAAgBD,GAAhB,CAAlB;AACH,KAFD;AAGH;;AAEDE,EAAAA,MAAM,CAACC,IAAP,CAAYvB,YAAZ,EAA0BmB,OAA1B,CAAkCK,IAAI,IAAI;AACtC,QAAIf,OAAO,CAACe,IAAD,CAAX,EAAmB;AACfd,MAAAA,UAAU,CAACV,YAAY,CAACwB,IAAD,CAAb,CAAV,GAAiCf,OAAO,CAACe,IAAD,CAAxC;AACH;AACJ,GAJD;;AAMA,MAAI,OAAOf,OAAO,CAACgB,IAAf,KAAwB,UAA5B,EAAwC;AACpCf,IAAAA,UAAU,CAACgB,QAAX,GAAsBjB,OAAO,CAACgB,IAA9B;AACH,GAFD,MAGK,IAAIhB,OAAO,CAACgB,IAAZ,EAAkB;AACnBf,IAAAA,UAAU,CAACgB,QAAX,GAAsB,YAAY;AAC9B,aAAOjB,OAAO,CAACgB,IAAf;AACH,KAFD;AAGH;;AAED,MAAIhB,OAAO,CAACkB,UAAZ,EAAwB;AACpBjB,IAAAA,UAAU,CAACiB,UAAX,GAAwBL,MAAM,CACzBC,IADmB,CACdd,OAAO,CAACkB,UADM,EAEnBC,MAFmB,CAEZ,CAACC,IAAD,EAAOT,GAAP,KAAe;AACnBS,MAAAA,IAAI,CAACT,GAAD,CAAJ,GAAYS,IAAI,CAAC,qBAAUT,GAAV,CAAD,CAAJ,GAAuBZ,MAAM,CAACC,OAAO,CAACkB,UAAR,CAAmBP,GAAnB,CAAD,CAAzC;AACA,aAAOS,IAAP;AACH,KALmB,EAKjB,EALiB,CAAxB;AAMH;;AAEDC,EAAAA,OAAO,CAACC,GAAR,CAAYrB,UAAZ;AAEA,QAAMsB,SAAS,GAAG,0BAAgBtB,UAAhB,CAAlB;AAEA,SAAOsB,SAAP;AACH","sourcesContent":["/**\n * @file component\n * @author cxtom(cxtom2008@gmail.com)\n */\n\nimport { defineComponent, inherits } from 'san';\nimport { extend, hyphenate } from '../shared/util';\nimport mergeClass from './merge-class';\nimport mergeStyle from './merge-style';\nimport loopExpression from './loop-expression';\n\nconst lifeCycleMap = {\n    beforeCreate: 'inited',\n    mounted: 'attached',\n    created: 'created',\n    beforeMount: 'created',\n    beforeDestroy: 'detached',\n    destroy: 'disposed',\n    updated: 'updated'\n};\n\nexport default function define (options) {\n\n    const sanOptions = {\n        _mc: mergeClass,\n        _ms: mergeStyle,\n        _l: loopExpression,\n        template: options.__santemplate\n    };\n\n    ['filters', 'computed', 'watch'].forEach(key => {\n        if (options[key]) {\n            sanOptions[key] = options[key];\n        }\n    });\n\n    if (options.methods) {\n        Object.keys(options.methods).forEach(key => {\n            sanOptions[key] = options.methods[key];\n        });\n    }\n\n    Object.keys(lifeCycleMap).forEach(hook => {\n        if (options[hook]) {\n            sanOptions[lifeCycleMap[hook]] = options[hook];\n        }\n    });\n\n    if (typeof options.data === 'function') {\n        sanOptions.initData = options.data;\n    }\n    else if (options.data) {\n        sanOptions.initData = function () {\n            return options.data;\n        };\n    }\n\n    if (options.components) {\n        sanOptions.components = Object\n            .keys(options.components)\n            .reduce((prev, key) => {\n                prev[key] = prev[hyphenate(key)] = define(options.components[key]);\n                return prev;\n            }, {});\n    }\n\n    console.log(sanOptions);\n\n    const Component = defineComponent(sanOptions);\n\n    return Component;\n}\n\n"],"file":"define-component.js"}